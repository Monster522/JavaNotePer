##UML图

### 1.基础概念

- UML-Unified Modeling Language 统一建模语言，又称标准建模语言。是对软件密集系统进行可视化建模的一种语言。UML的定义包括UML语义和UML表示法两个元素。

### 2.UML实例图

![](https://javanote.oss-cn-shenzhen.aliyuncs.com/4_ad787052-e069-4da7-9ef4-0c35d81b46fd.jpg)

- 车的类图结构为 <<abstract>>，表示车是一个抽象类。
- 车有两个继承类：小汽车和自行车。它们之间的关系为**实现关系**，使用**带空心箭头的虚线**表示。
- 小汽车为与SUV之间也是继承关系，它们之间的关系为**泛化关系**，使用**带空心箭头的实线**表示。
- 小汽车与发动机之间是**组合关系**，使用**带实心菱形箭头的实线**表示。
- 学生与班级之间是**聚合关系**，使用**带空心菱形箭头的实线**表示。
- 学生与身份证之间为**关联关系**，使用**一根实线**表示。
- 学生上学需要用到自行车，与自行车是一种**依赖关系**，使用**带箭头的虚线表示**。

### 3.类之间的关系

#### 泛化关系(generalization)

- 类的继承结构，两个对象之间如果可以用 is-a 来表示，就是继承关系。比如小汽车是车，自行车是车。
- 泛化关系用一条带空心箭头的实线表示，意义为继承非抽象类。比如SUV是小汽车为泛化，小汽车是车为实现。

```java
//泛化关系为 继承非抽象类
public class SmallCar {}
public class SUV extends SmallCar {}
```

#### 实现关系(realize)

- 实现关系用一条带空心箭头的虚线表示，意义为继承抽象类。比如自行车是车为实现，因为车没有具体的实现。

```java
//实现关系为 继承抽象类
public abstract class Car {}
public class SmallCar extends Car {}
```

#### 聚合关系(aggregation)

- 聚合关系用一条带空心菱形箭头的实线表示，表示实体对象之间的关系，表示整体由部分构成的语义。例如班级由学生组成。
- 聚合关系中，整体和部分是弱依赖。即使整体消失了，部分也不会消失。例如，班级消失了，学生还存在。

```java
//1. 实例化上，聚合关系为 两个类都是独立存在，分别实例化的。两个类是松耦合的。
//2. 封装性上，Goose类和GooseGroup类对于客户端都是可见的。
public  class GooseGroup
{
    public Goose goose;
	// goose类为 外部传入，不依赖GooseGroup类实例化
    public GooseGroup(Goose goose)
    {
        this.goose = goose;
    }
}

```

#### 组合关系(composition)

- 组合关系用一条带实心菱形箭头的实线表示，表示整体由部分构成的语义。
- 组合关系中，整体和部分是强依赖。整体消失了，部分的意义也会消失，反之亦可。例如小汽车消失了，发动机就没有意义。发动机消失了，小汽车也不是完整的。

```java
//1. 实例化上，组合关系为 Wing类的实例化是依赖Goose类的构造函数，是紧耦合的。
//2. 封装性上，Wings类被封装到Goose类里面，客户端只能看见Goose类。
public class Goose
{
    public Wings wings;
	//Wings类依赖Goose类实例化
    public Goose()
    {
        wings=new Wings();
    }
}
```

#### 关联关系(association)

- 关联关系是用一条直线表示的，描述不同类的对象之间的结构关系。这是一种**静态关系**， 通常与运行状态无关，一般由常识等因素决定的。比如学生和身份证相关联。
- 一般用来定义对象之间静态的、天然的结构，关联关系是一种 **强关联** 的关系。
- 关联关系默认不强调方向，表示对象间相互知道。如果特别强调方向，则表示 被箭头指向的元素 不知道发起箭头的元素。

```java
//1. 类A中有一个实例变量，该变量为类B
public class A {
    private B b;
}

//2. 类A引用了一个全局变量，该类型为类B
public class C {
    public static B bb;
}
public class A {
    public B ba = C.bb;
}
```

####依赖关系(dependency)

- 依赖关系是用一套带箭头的虚线表示的，描述一个对象在运行期间会用到另一个对象的关系。例如学生上学的时候依赖自行车，上课就不用。
- 是一种**临时性的关系**，通常在运行期间产生，并且随着运行时的变化， 依赖关系也可能发生变化。

```java
//1. 代码层面上，类A中的一个方法中形参为类B，运行时的弱依赖。
public class A {
    
    public void method(B b);
}

```

#### 类关系排序

-  类与类之间由弱到强关系是:   **没关系 > 依赖 > 关联 > 聚合 > 组合**



## 时序图

### 1.动态图概念

- 从静态图中**抽取瞬间值的变化**描述系统随时间变化的行为, 动态图包括交互图、活动图和状态图。交互图包括时序图和协作图。
- 时序图：显示对象之间的关系, 强调对象之间消息的时间顺序, 显示对象之间的交互。
- 协作图：描述对象之间的交互关系。

### 2.时序图概念

- 是描述了对象之间传递消息的时间顺序, 用来表示用例中的行为顺序, 是**强调消息时间顺序**的交互图。
- 时序图描述系统中**类和类之间的交互**, 将这些交互建模成消息交换, 时序图描述了类以及类之间的交换以完成的期望行为的消息， 时序图中**每条消息都代表了 类的一个操作 或者 引起状态机改变的触发事件**。
- 参与交互的对象在时序图**顶端水平排列**, 每个对象的底端绘制了一条**垂直虚线**, 对象A像对象B发送消息, 用一条**带箭头的实线**表示, 该实线起始于对象A底部的虚线, 终止于对象B底部的虚线; 实线箭头水平放置, 越靠近顶端越早被发送。
- 时序图提供了随时间推移的, 清晰的 可视化的轨迹

### 3.时序图示例

时序图包括四个元素 对象(Object), 生命线(Lifeline), 激活(Activation), 消息(Message);

![](https://javanote.oss-cn-shenzhen.aliyuncs.com/5_39b80c1c-22bd-4ef2-afb0-e9583b7d6c45.jpg)

1. 对象(Object)
- 符号表示：时序图中的对象与对象图中的表示方法一样, **使用矩形将对象名称包含起来, 并且对象名称下有下划线**。

- 对象创建时机：对象可以在交互开始的时候创建, 也可以在交互过程中进行创建。

  处于顶部，如果对象的位置在时序图顶部，说明在交互开始的时候对象就已经存在了。

  不在顶部，如果对象的位置不在顶部，那么对象在交互过程中创建的;


2. 生命线(Lifeline)
- 生命线是一条垂直的虚线, 这条虚线**表示对象的存在**, 在时序图中, 每个对象的底部都有生命线。

- 作用：生命线是一个时间线, 从时序图顶部一直到底部都存在, 其长度取决于交互的时间。

- 对象的生命线：对象与生命线结合在一起就是对象的生命线, 这个概念**包含对象图标 以及 对象下面的生命线图标**。


3. 激活(Activation)

- 激活：代表时序图中对象执行一项操作的时期，激活期可以理解为语义中 {} 中的内容，表示该对象被占用以完成某个任务。
- 去激活：指对象处于空闲状态，在等待消息激活这个对象。
- 激活的符号表示：当对象处于激活时期，生命线可以拓宽为矩形，这个矩形条成为激活条。
- **对象下一开始都有一个矩形激活条，表示对象的初始化。**

4. 消息(Message)

- 消息概念：定义 交互和协作 中**交换信息的类**, 对 对象之间的 通信内容 建模。

- 消息动作

  动作种类：消息允许在实体间传递信息 (传递参数), 允许实体请求其它服务, **对象之间通过发送和接收消息进行通信**。

  产生结果：消息可以触发操作, 唤起信号, 或使目标对象创建 或 销毁;

- 异步和同步通信

  异步通信：消息是信号的时候, 发送信号之后等待对方触发相应方法, 这是明确的 命名的 对象间的异步通信。

  同步通信：直接调用对象的方法, 执行方法返回结果, 这种具有返回控制机制的操作是同步通信。



